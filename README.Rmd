---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```
# SWIM - A Package for Sensitivity Analysis

The SWIM package provides weights on simulated scenarios from a stochastic model, such that a stressed model components (random variables) fulfil given probabilistic constraints (e.g. specified values for risk measures), under the new scenario weights. Scenario weights are selected by constrained minimisation of the relative entropy to the baseline model.

## Installation

You can install the SWIM package from [GitHub](https://github.com/spesenti/SWIM) with:

``` r
install.packages("spesenti/SWIM")
```
## Scope of the SWIM package  
Implemented stresses are: 

R functions          | Stress
------------------- | -------------
stress_VaR          | VaR risk measure, a quantile
stress_VaR_ES       | VaR and ES risk measures
stress_mean         | means
stress_mean_sd      | means and standard deviations
stress_mean_moment  | moments, functions of moments
stress_prob         | probabilities of intervals
stress_user         | user defined scenario weights



## Example - Stressing the VaR of a portfolio

Consider a portfolio $Y = X1 + X2 + X3 + X4 + X5$, where (X1, X2, X3, X4, X5) are correlated normally istributed with equal mean and different standard deviations.



```{r example}
set.seed(0)
SD <- round(runif(5, 30, 80))
Corr <- matrix(rep(0.5, 5^2), nrow = 5) + diag(rep(1 - 0.5, 5))
if (!requireNamespace("mvtnorm", quietly = TRUE))
   stop("Package \"mvtnorm\" needed for this function 
   to work. Please install it.")
x <- mvtnorm::rmvnorm(10^5, 
   mean =  rep(100, 5), 
   sigma = (SD %*% t(SD)) * Corr) 
data <- data.frame(rowSums(x), x)
names(data) <- c("Y", "X1", "X2", "X3", "X4", "X5")
rev.stress <- stress(type = "VaR", x = data, 
   alpha = c(0.75, 0.9), q_ratio = 1.1, k = 1)
```

Summary statistics of the baseline and the stressed model can be obtained via

```{r summary}
summary(rev.stress)
```


What is special about using `README.Rmd` instead of just `README.md`? You can include R chunks like so:

```{r cars}
summary(cars)
```

You'll still need to render `README.Rmd` regularly, to keep `README.md` up-to-date.

You can also embed plots, for example:

```{r pressure, echo = FALSE}
plot(pressure)
```

In that case, don't forget to commit and push the resulting figure files, so they display on GitHub!
